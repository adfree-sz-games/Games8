<!DOCTYPE html>
<html lang="en-us">
	<head><meta http-equiv="Content-Security-Policy" content="child-src 'self' *.playhop.com *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: playhop.com yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz; connect-src 'self' *.eponesh.com *.gameanalytics.com *.playhop.com *.unity3d.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.net *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: data: playhop.com storage.yandexcloud.net wss://*.eponesh.com:* www.google-analytics.com www.googletagmanager.com yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yandexmetrica.com yastatic.net; default-src 'self'; font-src 'self' *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz fonts.gstatic.com playhop.com storage.yandexcloud.net yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yastat.net yastatic.net; frame-src 'self' *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz localhost playhop.com yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yastatic.net; img-src 'self' *.eponesh.com *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.net *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: data: playhop.com storage.yandexcloud.net yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yastatic.net; media-src 'self' *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.net *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: data: playhop.com storage.yandexcloud.net yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz; object-src 'self' *.playhop.com *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: playhop.com yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz; script-src 'self' 'unsafe-eval' 'unsafe-inline' *.eponesh.com *.gameanalytics.com *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: data: playhop.com storage.yandexcloud.net www.google-analytics.com www.googletagmanager.com yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz yastatic.net; style-src 'self' 'unsafe-eval' 'unsafe-inline' *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: data: fonts.googleapis.com playhop.com storage.yandexcloud.net yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz; worker-src 'self' *.playhop.com *.website.yandexcloud.net *.yandex.az *.yandex.by *.yandex.co.il *.yandex.com *.yandex.com.am *.yandex.com.ge *.yandex.com.tr *.yandex.ee *.yandex.fr *.yandex.kg *.yandex.kz *.yandex.lt *.yandex.lv *.yandex.md *.yandex.ru *.yandex.tj *.yandex.tm *.yandex.ua *.yandex.uz blob: playhop.com storage.yandexcloud.net yandex.az yandex.by yandex.co.il yandex.com yandex.com.am yandex.com.ge yandex.com.tr yandex.ee yandex.fr yandex.kg yandex.kz yandex.lt yandex.lv yandex.md yandex.ru yandex.tj yandex.tm yandex.ua yandex.uz">
		<meta charset="utf-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<title>BricksBreaker</title>
		<link rel="stylesheet" href="./TemplateData/style.css">
	</head>
	
	<body class="dark">
		<div id="unity-container" class="unity-desktop">
			<canvas id="unity-canvas"></canvas>
		</div>
		<div id="loading-cover" style="display:none;">
			<div id="unity-loading-bar">
				<div id="unity-logo"><img src="./logo.png"></div>
				<div id="unity-progress-bar-empty" style="display: none;">
					<div id="unity-progress-bar-full"></div>
				</div>
				<div class="spinner"></div>
			</div>
		</div>
		<div id="unity-fullscreen-button" style="display: none;"></div>
		
		<script>
		const hideFullScreenButton = "";
		const buildUrl = "Build";
		const loaderUrl = buildUrl + "/BricksBreaker.loader.js";
		const config = {
			dataUrl: buildUrl + "/BricksBreaker.data.unityweb",
			frameworkUrl: buildUrl + "/BricksBreaker.framework.js.unityweb",
			codeUrl: buildUrl + "/BricksBreaker.wasm.unityweb",
			streamingAssetsUrl: "StreamingAssets",
			companyName: "ManyBits",
			productName: "BricksBreaker",
			productVersion: "1.0.2",
		};

		const container = document.querySelector("#unity-container");
		const canvas = document.querySelector("#unity-canvas");
		const loadingCover = document.querySelector("#loading-cover");
		const progressBarEmpty = document.querySelector("#unity-progress-bar-empty");
		const progressBarFull = document.querySelector("#unity-progress-bar-full");
		const spinner = document.querySelector('.spinner');
		var mobileWarning = document.querySelector("#unity-mobile-warning");

		if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
			container.className = "unity-mobile";
			//config.devicePixelRatio = 1;
		}
		
		loadingCover.style.display = "none";

		const script = document.createElement("script");
		var unityI = null;
		script.src = loaderUrl;
		script.onload = () => {
			createUnityInstance(canvas, config, (progress) => {
				spinner.style.display = "none";
				progressBarEmpty.style.display = "";
				progressBarFull.style.width = `${100 * progress}%`;
			}).then((unityInstance) => {
				unityI = unityInstance;
				loadingCover.style.display = "none";
			}).catch((message) => {
				alert(message);
			});
		};
		
		document.body.appendChild(script);
		</script>
	
		<script>
		var player;
		var sdk;
		var payments = null;

	
		var lb;

		function GetLeaderBoard(){
			sdk.getLeaderboards().then(_lb => lb = _lb);
		}

		function SetLeaderBoard(score){
			sdk.getLeaderboards()
				.then(lb => {
					console.log(score);
					lb.setLeaderboardScore('LeaderBoard', score);
				});
        }

		function GetLeaderBoardEntries(){
			sdk.getLeaderboards()
				.then(lb => {
					lb.getLeaderboardEntries('LeaderBoard', { quantityTop: 10, includeUser: true, quantityAround: 3 })
					.then(res => {
						console.log(res);
						unityI.SendMessage('YandexSDK', 'BoardEntriesReady', JSON.stringify(res));
					});
				});
		}

		function auth(){
			initPlayer().then(() => {
				getUser();
			}).catch(err => {
				sdk.auth.openAuthDialog().then(() => {
					initPlayer();
					getUser();
				});
			});
		}

		function initPlayer(){
			console.log('InitPlayerTry')
			return sdk.getPlayer().then(_player => {
				console.log('InitPlayer2');
				player = _player;
			});
		}

		function getUser(){
			console.log('try to get Name');
			var data = player.getName();
			unityI.SendMessage('YandexSDK', 'AuthenticateSuccess', data);
			console.log('getName done');
		}

		function getUserData(){
			player.getData().then(stats => {
				console.log('Data is getting');
				console.log(JSON.stringify(stats));
				GetLeaderBoard();
				unityI.SendMessage('YandexSDK', 'DataGetting', JSON.stringify(stats));
			});
		}

		function setUserData(_data){
			console.log('Try Save');
			console.log(_data);
			player.setData({data : _data}).then(() => {
				console.log('saved');
			}).catch(() => {console.log('unsaved')});
		}

		function showFullscrenAd(){
			return;
		}

		function showRewardedAd(id){
			
						unityI.SendMessage('YandexSDK', 'OnRewarded');
						console.log('Rewarded! Id: ' + id);
						return;
			
		}
		
		function getLang(){
			console.log('getLang', sdk.environment.i18n.lang);
			unityI.SendMessage('YandexSDK', 'OnLanguageGet', sdk.environment.i18n.lang);
		}
		</script>
	</body>
</html>
